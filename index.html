<script type="module">
    // ...Firebase初期化コードは省略...

    // 指示⑥: 隠しコマンド（タイトル5連クリックで発動）
    let clickCount = 0;
    document.querySelector('h1').addEventListener('click', () => {
        clickCount++;
        if (clickCount === 5) {
            const pw = prompt("ADMIN ACCESS REQUIRED:");
            if (pw === "nexus2026") { // 指示通りの隠しコマンド
                document.getElementById('admin-panel').style.display = 'block';
                alert("NEXUS COMMAND CENTER ONLINE");
            }
            clickCount = 0;
        }
    });

    // 指示⑰: データの入力・消去機能
    window.handleUpdate = async () => {
        const id = document.getElementById('target-id').value;
        if (!id) return alert("ID is required");
        
        await setDoc(doc(db, "ai_index", id), {
            name: document.getElementById('target-name').value,
            short_desc: document.getElementById('target-desc').value,
            updatedAt: new Date()
        }, { merge: true });
        alert("System Synchronized.");
    };
</script>

<style>
    /* 指示⑥: 管理者パネルのUI（承認後に表示） */
    #admin-panel {
        display: none; position: fixed; top: 100px; right: 20px;
        background: rgba(0, 162, 255, 0.1); backdrop-filter: blur(20px);
        padding: 30px; border: 2px solid #00a2ff; border-radius: 20px; z-index: 10000;
    }
</style>

<div id="admin-panel">
    <h3>COMMAND CENTER</h3>
    <input id="target-id" placeholder="Target AI ID">
    <input id="target-name" placeholder="New Name">
    <textarea id="target-desc" placeholder="New Description"></textarea>
    <button onclick="handleUpdate()">UPDATE DATA</button>
    <button onclick="document.getElementById('admin-panel').style.display='none'">CLOSE</button>
</div>
