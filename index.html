<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NEXUS AI | Global Professional Intelligence Index</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>N</text></svg>">
    <style>
        :root { --blue: #00a2ff; --bg: #0b0e14; --card: #161b22; --border: #30363d; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        /* 指示⑧: ヘッダー3分割 */
        header { display: grid; grid-template-columns: 1fr 2fr 1fr; align-items: center; padding: 20px; border-bottom: 1px solid #1e2530; background: #0d1117; }
        .sp { color: #4a5568; font-size: 11px; font-weight: bold; text-align: center; letter-spacing: 2px; }

        .layout { display: grid; grid-template-columns: 260px 1fr 260px; gap: 20px; padding: 20px; }
        /* 指示⑫: 中央カラム 3~4列 */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }

        /* 指示①②⑬⑮⑯: カードデザイン */
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; position: relative; transition: 0.3s; }
        .v-tag { font-size: 9px; color: var(--blue); margin-top: 2px; display: block; font-weight: bold; }
        .desc { font-size: 12px; opacity: 0.7; height: 38px; overflow: hidden; margin: 12px 0; line-height: 1.4; }
        .chip { background: #0d1117; padding: 4px 8px; border-radius: 4px; font-size: 11px; border: 1px solid var(--border); }
        
        /* 指示⑥: ステルスパネル */
        #stealth { position: fixed; top: -100px; left: 0; width: 100%; height: 80px; background: rgba(11,20,30,0.95); backdrop-filter: blur(20px); transition: 0.4s; z-index: 9999; display: flex; justify-content: center; align-items: center; border-bottom: 2px solid var(--blue); }
        #stealth.active { top: 0; }
        #nexus-q { width: 70%; background: none; border: none; border-bottom: 1px solid white; color: white; font-size: 24px; outline: none; }

        .contact-btn { position: absolute; top: 15px; right: 20px; padding: 6px 16px; border: 1px solid var(--blue); border-radius: 20px; color: white; cursor: pointer; font-size: 11px; font-weight: bold; }
    </style>
</head>
<body>

<div id="stealth"><input type="text" id="nexus-q" placeholder="Semantic Search: 'Video under 20'..."></div>

<header>
    <div class="sp">SPONSORS WANTED</div>
    <div style="text-align: center;">
        <h1 style="margin:0; letter-spacing: 2px;">NEXUS AI</h1>
        <div style="font-size:10px; opacity:0.6;">v119.5 PRO | FIREBASE SYNCHRONIZED</div>
    </div>
    <div class="sp">SPONSORS WANTED</div>
</header>

<div class="layout">
    <aside>
        <div id="clock" style="color:var(--blue); font-size:18px; margin-bottom:20px;"></div> <div style="border-left:3px solid var(--blue); padding-left:10px; font-weight:bold; font-size:13px;">LIVE AI NEWS</div>
        <div id="news-box" style="font-size:11px; margin-top:10px; opacity:0.7;">Fetching 2026 Feeds...</div>
    </aside>

    <main style="position: relative;">
        <div style="margin-bottom:15px; font-size:11px; opacity:0.8;">Indexing <span id="count">0</span> AI Systems...</div> <div class="contact-btn" onclick="alert('Secure Contact via Firebase Cloud Functions')">Contact</div>
        <div id="main-grid" class="grid">Loading Database...</div>
    </main>

    <aside>
        <div style="border-left:3px solid var(--blue); padding-left:10px; font-weight:bold; font-size:13px;">NEW ARRIVALS</div>
        <div id="arrival-box" style="font-size:11px; margin-top:10px; opacity:0.7;">Syncing...</div>
    </aside>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  // --- 【重要】あなたのFirebase Configをここに貼り付けてください ---
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // 指示⑪: リアルタイム同期
  const colRef = collection(db, "ai_index");
  onSnapshot(colRef, (snapshot) => {
    let aiData = [];
    snapshot.docs.forEach(doc => aiData.push({ ...doc.data(), id: doc.id }));
    renderCards(aiData);
  });

  function renderCards(list) {
    const grid = document.getElementById('main-grid');
    grid.innerHTML = '';
    list.forEach(ai => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
          <img src="https://www.google.com/s2/favicons?domain=${ai.favicon_domain}&sz=32">
          <div>
            <strong style="font-size:15px;">${ai.name}</strong>
            <span class="v-tag">Model: ${ai.version || 'v1.0 PRO'}</span> </div>
          <img src="https://flagcdn.com/16x12/${ai.flag}.png" style="margin-left:auto;"> </div>
        <div class="desc">${ai.short_desc}</div> <div style="display:flex; justify-content:space-between; align-items:center;">
          <span class="chip">Min. $${ai.pricing[0].price}</span> <div style="color:gold; font-size:12px;">★ ${ai.rating} <span style="opacity:0.6;">(${ai.rating}/5)</span></div> </div>
        <div style="margin-top:15px; border-top:1px solid var(--border); padding-top:10px; text-align:center; font-size:11px; color:var(--blue); cursor:pointer;">Details</div> `;
      grid.appendChild(card);
    });
    document.getElementById('count').innerText = list.length;
  }

  // 指示⑨: 時計
  setInterval(() => {
    const d = new Date();
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
    document.getElementById('clock').innerHTML = d.toLocaleTimeString('en-US',{hour12:false}) + `<br><small style="font-size:10px;opacity:0.4">${tz}</small>`;
  }, 1000);

  // 指示⑥: ステルス
  window.addEventListener('mousemove', e => {
    document.getElementById('stealth').classList.toggle('active', e.clientY < 30);
  });
</script>
</body>
</html>
