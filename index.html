<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nexus AI | Global Intelligence Index</title>
<style>
/* UI„É¨„Ç§„Ç¢„Ç¶„Éà„ÅØÁµ∂ÂØæÂ§âÊõ¥‰∏çÂèØÔºöÊó¢Â≠ò„ÅÆ„Çπ„Çø„Ç§„É´„ÇíÁ∂ôÊâø */
:root { --bg: #020617; --panel: rgba(15, 23, 42, 0.9); --accent: #38bdf8; --text: #f8fafc; --muted: #64748b; --border: rgba(255, 255, 255, 0.05); }
body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; background-image: radial-gradient(circle at 50% 0%, #1e1b4b 0%, #020617 100%); }
.nexus-wrapper { display: grid; grid-template-columns: 280px 1fr 340px; height: 100vh; }
.scroll-v { overflow-y: auto; padding: 25px; scrollbar-width: none; }

/* „Ç´„Éº„Éâ„Éá„Ç∂„Ç§„É≥„ÅÆ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÔºö„Éá„Éº„Çø„ÇíË°®Á§∫ */
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; }
.card { background: rgba(30, 41, 59, 0.5); border: 1px solid var(--border); border-radius: 16px; padding: 20px; cursor: pointer; position: relative; }
.card:hover { border-color: var(--accent); transform: translateY(-3px); }

.card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.ai-logo { width: 32px; height: 32px; border-radius: 6px; background: #0f172a; }
.country-tag { font-size: 0.65rem; color: var(--accent); font-weight: 800; text-transform: uppercase; }

.c-name { font-weight: 800; font-size: 1.1rem; margin: 0; }
.c-provider { font-size: 0.75rem; color: var(--muted); margin-bottom: 10px; }
.c-price { font-size: 0.75rem; color: #10b981; font-weight: bold; background: rgba(16, 185, 129, 0.1); padding: 2px 8px; border-radius: 4px; display: inline-block; }
.c-desc-short { font-size: 0.8rem; color: #9ca3af; margin-top: 10px; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

/* Ë©≥Á¥∞„Éú„Çø„É≥ */
.detail-btn { margin-top: 15px; width: 100%; padding: 8px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: white; border-radius: 8px; font-size: 0.75rem; cursor: pointer; }
.detail-btn:hover { background: var(--accent); color: #020617; font-weight: bold; }

/* Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ */
.modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 5000; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
.modal-content { background: #0f172a; width: 90%; max-width: 600px; padding: 40px; border-radius: 24px; border: 1px solid var(--accent); position: relative; max-height: 80vh; overflow-y: auto; }
.close-modal { position: absolute; top: 20px; right: 20px; font-size: 1.5rem; cursor: pointer; }

/* Admin UI */
.admin-trigger { position: fixed; bottom: 20px; right: 20px; cursor: pointer; opacity: 0.3; }
</style>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<div class="nexus-wrapper">
  <aside class="sidebar scroll-v">
    <div style="font-size: 1.8rem; font-weight: 900; color: var(--accent); margin-bottom: 30px;">Nexus AI</div>
    <div id="cat-nav"></div>
  </aside>

  <main class="scroll-v">
    <input type="text" id="nexus-search" style="width:100%; padding:16px; border-radius:50px; border:1px solid var(--border); background:rgba(255,255,255,0.05); color:white; margin-bottom:30px; outline:none;" placeholder="Search AI Index...">
    <div id="nexus-grid" class="grid"></div>
  </main>

  <aside class="sidebar scroll-v" style="border-left:1px solid var(--border);">
    <div id="ins-view"><h3>Select Intelligence</h3></div>
  </aside>
</div>

<div id="detail-modal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal()">√ó</span>
    <div id="modal-body"></div>
  </div>
</div>

<div class="admin-trigger" onclick="toggleAdmin()">‚öôÔ∏è</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD0JXpRxLnwrtPsqfK63LHhLG4J999VfwU",
  authDomain: "nexus-ai-55d14.firebaseapp.com",
  projectId: "nexus-ai-55d14",
  storageBucket: "nexus-ai-55d14.firebasestorage.app",
  messagingSenderId: "28279756535",
  appId: "1:28279756535:web:2ae124e9fe28736a7725f2",
  measurementId: "G-TYNP47D66Y"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
let nexusData = [];

async function fetchData() {
  const snap = await db.collection("ai_tools").get();
  nexusData = [];
  snap.forEach(doc => nexusData.push({ id: doc.id, ...doc.data() }));
  render();
}
fetchData();

function render() {
  const grid = document.getElementById("nexus-grid");
  grid.innerHTML = nexusData.map(it => {
    const icon = it.favicon_domain ? `https://www.google.com/s2/favicons?sz=128&domain=${it.favicon_domain}` : `https://ui-avatars.com/api/?name=${it.name}`;
    const pricing = it.pricing && it.pricing[0] ? `${it.pricing[0].plan}: ${it.pricing[0].price}` : "Contact Sales";
    
    return `
    <div class="card" onclick="inspect('${it.id}')">
      <div class="card-header">
        <img src="${icon}" class="ai-logo">
        <span class="country-tag">${it.flag || 'üåê'} ${it.country || 'Global'}</span>
      </div>
      <h3 class="c-name">${it.name}</h3>
      <div class="c-provider">by ${it.provider || 'Independent'}</div>
      <div class="c-price">${pricing}</div>
      <div class="c-desc-short">${it.short_desc || 'No description available.'}</div>
      <button class="detail-btn" onclick="openDetail(event, '${it.id}')">View Full Intel</button>
    </div>`;
  }).join("");
}

function openDetail(e, id) {
  e.stopPropagation();
  const it = nexusData.find(x => x.id === id);
  const modal = document.getElementById("detail-modal");
  const body = document.getElementById("modal-body");
  
  // 1000ÊñáÂ≠ó‰ª•ÂÜÖ„ÅÆË©≥Á¥∞„Å®URL„ÇíË°®Á§∫
  body.innerHTML = `
    <div style="display:flex; align-items:center; gap:20px; margin-bottom:30px;">
      <img src="https://www.google.com/s2/favicons?sz=128&domain=${it.favicon_domain}" style="width:64px; height:64px; border-radius:12px;">
      <div>
        <h2 style="margin:0;">${it.name}</h2>
        <p style="color:var(--accent); margin:5px 0 0 0;">${it.provider}</p>
      </div>
    </div>
    <div style="line-height:1.8; color:#d1d5db; margin-bottom:40px;">
      ${it.detail_en || it.short_desc || 'No extended intelligence data available for this entity.'}
    </div>
    <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:12px; margin-bottom:30px;">
      <h4 style="margin:0 0 10px 0; font-size:0.8rem; color:var(--muted); text-transform:uppercase;">Technical Parameters</h4>
      <p style="font-size:0.9rem;">Pricing: ${it.pricing ? JSON.stringify(it.pricing[0]) : 'Standard'}</p>
      <p style="font-size:0.9rem;">Integrations: ${it.integrations || 'API Available'}</p>
    </div>
    <a href="${it.url || '#'}" target="_blank" style="display:block; width:100%; background:var(--accent); color:#020617; text-align:center; padding:18px; border-radius:12px; font-weight:900; text-decoration:none;">
      Access Official Matrix
    </a>
  `;
  modal.style.display = "flex";
}

function closeModal() { document.getElementById("detail-modal").style.display = "none"; }
window.toggleAdmin = () => fetchData(); // „Ç∑„É≥„Éó„É´„Å´„É™„É≠„Éº„Éâ
</script>
</body>
</html>
